<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Top Church New Year's Eve</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="preload" href="css/styles.css" as="style">
  <link rel="icon" type="image/png" sizes="32x32" href="png/logo.png">
  <link rel="apple-touch-icon" href="png/logo.png">
  <link rel="preload" href="svg/Top Church Mark.svg" as="image">
  <meta name="theme-color" content="#101418">
  <meta name="color-scheme" content="dark">
  <meta name="description" content="Top Church New Year's Eve｜分享神蹟、見證與感動，一起建造同心的教會。">
  <meta property="og:title" content="Top Church New Year's Eve">
  <meta property="og:description" content="分享你的見證經歷，讓感動在神蹟牆上持續燃燒。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://github.com/topheart/New-Year-s-Eve/">
  <meta property="og:image" content="https://github.com/topheart/New-Year-s-Eve/png/cover.jpg">
  <meta property="og:image:alt" content="Top Church New Year's Eve cover art">
  <meta property="og:locale" content="zh_TW">
  <meta property="og:site_name" content="TOP CHURCH">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Top Church New Year's Eve">
  <meta name="twitter:description" content="即時瀏覽、分享並記錄每一則神蹟留言。">
  <meta name="twitter:image" content="https://github.com/topheart/New-Year-s-Eve/png/cover.jpg">
  <script>
    try {
      if (localStorage.getItem("onlineStatus") === "false") {
        document.documentElement.classList.add("hide-online-status");
      }
    } catch (e) {}
  </script>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/read-mode.css">
  <link rel="stylesheet" href="css/expand-btn.css">
  <link rel="stylesheet" href="css/playback-spotlight.css">
  <link rel="stylesheet" href="css/author-name.css">
</head>
<body>
  <main>
    <section class="wall-section">
      <div id="marqueeLayer" class="marquee-layer" aria-hidden="true">
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
        <div class="marquee-line">
          <div class="marquee-track">
            <span class="marquee-text"></span>
          </div>
        </div>
      </div>
      <div id="playbackOverlay" class="playback-overlay" aria-hidden="true">
        <div id="playbackFlash" class="playback-flash"></div>
      </div>
      <div class="wall-stage" id="wallStage">
        <div class="wall-wrapper" id="wallWrapper">
          <svg id="wallSvg" viewBox="0 0 3500 1779.31" role="img" aria-labelledby="wallTitle" preserveAspectRatio="xMidYMid meet">
          <title id="wallTitle">Top Church New Year's Eve</title>
          <defs>
            <symbol id="heartSticker" viewBox="0 0 2000 2000">
              <g>
                <path fill="#ffffff" d="M1000,1966c-130.42,0-256.93-25.54-376-75.9-115.03-48.65-218.34-118.31-307.07-207.04-88.73-88.73-158.38-192.04-207.04-307.06-50.36-119.07-75.9-245.58-75.9-376s25.54-256.93,75.9-376c48.65-115.03,118.31-218.34,207.04-307.06,88.73-88.73,192.04-158.38,307.07-207.04,119.07-50.36,245.58-75.9,376-75.9s256.93,25.54,376,75.9c115.03,48.65,218.34,118.31,307.07,207.04,88.73,88.73,158.38,192.04,207.04,307.06,50.36,119.07,75.9,245.58,75.9,376s-25.54,256.93-75.9,376c-48.65,115.03-118.31,218.34-207.04,307.06-88.73,88.73-192.04,158.38-307.07,207.04-119.07,50.36-245.58,75.9-376,75.9Z"/>
                <path fill="#333232" d="M1000,68c63.28,0,126.5,6.37,187.9,18.94,59.81,12.24,118.64,30.5,174.85,54.28,55.21,23.35,108.47,52.26,158.29,85.92,49.37,33.35,95.79,71.65,137.98,113.85,42.19,42.19,80.5,88.62,113.85,137.98,33.66,49.82,62.57,103.08,85.92,158.29,23.78,56.22,42.04,115.04,54.28,174.85,12.56,61.4,18.94,124.62,18.94,187.9s-6.37,126.5-18.94,187.9c-12.24,59.81-30.5,118.64-54.28,174.85-23.35,55.21-52.26,108.47-85.92,158.29-33.35,49.37-71.65,95.79-113.85,137.98-42.19,42.19-88.61,80.5-137.98,113.85-49.82,33.66-103.08,62.57-158.29,85.92-56.22,23.78-115.04,42.04-174.85,54.28-61.4,12.56-124.62,18.94-187.9,18.94s-126.5-6.37-187.9-18.94c-59.81-12.24-118.64-30.5-174.85-54.28-55.21-23.35-108.47-52.26-158.29-85.92-49.37-33.35-95.79-71.65-137.98-113.85-42.19-42.19-80.5-88.62-113.85-137.98-33.66-49.82-62.57-103.08-85.92-158.29-23.78-56.22-42.04-115.04-54.28-174.85-12.57-61.4-18.94-124.62-18.94-187.9s6.37-126.5,18.94-187.9c12.24-59.81,30.5-118.64,54.28-174.85,23.35-55.21,52.26-108.47,85.92-158.29,33.35-49.37,71.65-95.79,113.85-137.98,42.19-42.19,88.61-80.5,137.98-113.85,49.82-33.66,103.08-62.57,158.29-85.92,56.22-23.78,115.04-42.04,174.85-54.28,61.4-12.57,124.62-18.94,187.9-18.94M1000,0C447.72,0,0,447.72,0,1000s447.72,1000,1000,1000,1000-447.72,1000-1000S1552.28,0,1000,0h0Z"/>
                <path fill="#333232" d="M1269.5,1312.12l166.49,73.06-37.67-5.92,23.78,20.85-10.88,6.1-25.78-6.1,6.96,12.03h-12.89v7.98s-68.3-17.02-125.88-54.02l-21.75-9.97h27.72l-34.72-17h33.73l-1.94-12.95,12.84-14.08Z"/>
                <path fill="#333232" d="M1671.85,803.98l154.58-82.05s-174.56,65.39-235.59,69.76c-3.03.29-5.77.37-8.22.29-51.55-2.03,143.42-26.82,206.84-122.84,63.44-96.09-15.1-5.5-15.1-5.5l-217.49,112.38,112.98-74.1,55.48-94.05-186.28,158.03-47.59,22.06,51.51-46.05,65.45-83.98,23.77-78.07-111.03,154.11s-63.37,65.96-93.17,71.93c0,0,87.25-96,91.25-168l-61.45,104.02s-67.42,86.05-83.29,96.02c-15.85,10.01-152.59,60.08-152.59,60.08l-241.8,140.03-97.09,43.99-95.17-1.99-164.48-66.03-81.25-34.44-10.8-7.85-48.63-19.69-26.07-16.42-28.07-16.42-11.29-13.15-87.18-50.07-28.69-17.27-20.9-16.76-106.95-100,29.68,88.04-29.68-13.97,14.83,61.98-14.83-13.99,45.56,67.93,81.19,60.08,126.87,29.97,178.39,70.09,85.18,9.97s-51.54,10.01-79.25,14.02c-27.76,4-43.61,16-43.61,16l-9.89,36.03h61.41l97.16,49.96,158.53,110.04,281.38,54.05h11.93l23.81,17.13h33.64l-47.53-35.17,37.64-12-19.81-22,29.71-19.98v-42.06l15.87-17.99,77.32-39.99h73.32l55.51-70.01,23.74-2.03,85.24-43.99v-23.45l39.64-36.6-59.48-8,59.48-6.03,29.71-39.3,61.45-22.68v-8l45.64-21.99-15.92-6.02,57.52-26.02-57.52-4.04,77.34-37.98-83.29-3.98,114.99-50.02-154.58,24.03ZM666.86,1117.15c-11.67,0-25.38-11.71-25.38-11.71l43.22-6.26s-6.14,17.97-17.84,17.97Z"/>
              </g>
            </symbol>

            <radialGradient id="placementGlowGradient" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#fff7d6" stop-opacity="0.95"/>
              <stop offset="40%" stop-color="#ffd89b" stop-opacity="0.6"/>
              <stop offset="100%" stop-color="#f4a64a" stop-opacity="0"/>
            </radialGradient>

            <filter id="softGlowFilter" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur in="SourceGraphic" stdDeviation="14" result="blur"/>
              <feMerge>
                <feMergeNode in="blur"/>
              </feMerge>
            </filter>

            <radialGradient id="eagleGlowGradient" cx="50%" cy="50%" r="68%">
              <stop offset="0%" stop-color="#fff9e2" stop-opacity="0.95"/>
              <stop offset="48%" stop-color="#ffe2a9" stop-opacity="0.62"/>
              <stop offset="100%" stop-color="#ffb871" stop-opacity="0"/>
            </radialGradient>

            <linearGradient id="eagleBodyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#fff8e7"/>
              <stop offset="20%" stop-color="#fcdfa6"/>
              <stop offset="50%" stop-color="#e8a863"/>
              <stop offset="80%" stop-color="#a86236"/>
              <stop offset="100%" stop-color="#5e3218"/>
            </linearGradient>

            <filter id="eagle3D" x="-50%" y="-50%" width="200%" height="200%">
              <feDropShadow dx="0" dy="15" stdDeviation="10" flood-color="rgba(0,0,0,0.4)"/>
              <feGaussianBlur in="SourceAlpha" stdDeviation="8" result="blur"/>
              <feSpecularLighting in="blur" surfaceScale="6" specularConstant="0.6" specularExponent="25" lighting-color="#ffffff" result="specOut">
                <fePointLight x="-2000" y="-4000" z="4000"/>
              </feSpecularLighting>
              <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut"/>
              <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0"/>
            </filter>

            <clipPath id="eagleClip">
              <path class="clip-eagle" d="M2290,1515.06l333.59,146.4-75.49-11.85,47.64,41.78-21.81,12.22-51.66-12.22,13.94,24.11h-25.83v15.99s-136.85-34.1-252.22-108.23l-43.58-19.98h55.54l-69.56-34.07h67.58l-3.88-25.94,25.73-28.21Z"/>
              <path class="clip-eagle" d="M3096.2,496.89l309.74-164.4s-349.77,131.03-472.05,139.77c-6.07.58-11.56.73-16.46.58-103.3-4.06,287.38-53.75,414.46-246.14,127.12-192.54-30.26-11.01-30.26-11.01l-435.79,225.17,226.38-148.48,111.16-188.44-373.26,316.65-95.35,44.2,103.22-92.28,131.14-168.28,47.64-156.42-222.47,308.79s-126.97,132.17-186.68,144.13c0,0,174.83-192.36,182.84-336.63l-123.13,208.42s-135.09,172.42-166.89,192.39c-31.76,20.05-305.75,120.38-305.75,120.38l-484.49,280.58-194.55,88.15-190.69-3.99-329.57-132.31-162.81-69.01-21.64-15.73-97.44-39.45-52.23-32.89-56.24-32.89-22.62-26.34-174.68-100.33-57.48-34.61-41.88-33.59-214.29-200.37,59.48,176.4-59.48-27.99,29.71,124.19-29.71-28.03,91.3,136.12,162.68,120.38,254.21,60.04,357.45,140.44,170.67,19.98s-103.28,20.05-158.8,28.1c-55.62,8.01-87.38,32.05-87.38,32.05l-19.81,72.19h123.05l194.68,100.11,317.66,220.5,563.8,108.31h23.89l47.71,34.32h67.4l-95.24-70.48,75.41-24.04-39.7-44.09,59.53-40.03v-84.27l31.8-36.04,154.92-80.13h146.91l111.24-140.29,47.57-4.06,170.8-88.15v-46.98l79.44-73.33-119.17-16.02,119.17-12.08,59.53-78.74,123.13-45.45v-16.02l91.44-44.06-31.91-12.07,115.26-52.14-115.26-8.09,154.96-76.11-166.89-7.98,230.41-100.22-309.74,48.15ZM1082.48,1124.38c-23.38,0-50.86-23.46-50.86-23.46l86.61-12.55s-12.29,36-35.75,36Z"/>
            </clipPath>

            <radialGradient id="marqueeHighlightGradient" cx="50%" cy="50%" r="50%">
              <stop offset="20%" stop-color="#ffffff" stop-opacity="0"/>
              <stop offset="35%" stop-color="#ffffff" stop-opacity="1"/>
              <stop offset="55%" stop-color="#ffffff" stop-opacity="0.8"/>
              <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
            </radialGradient>

            <radialGradient id="validHighlightGradient" cx="50%" cy="50%" r="50%">
              <stop offset="25%" stop-color="#00ff6a" stop-opacity="0"/>
              <stop offset="40%" stop-color="#00ff6a" stop-opacity="0.8"/>
              <stop offset="70%" stop-color="#00ff6a" stop-opacity="0.4"/>
              <stop offset="100%" stop-color="#00ff6a" stop-opacity="0"/>
            </radialGradient>

            <radialGradient id="invalidHighlightGradient" cx="50%" cy="50%" r="50%">
              <stop offset="25%" stop-color="#ff2a2a" stop-opacity="0"/>
              <stop offset="40%" stop-color="#ff2a2a" stop-opacity="0.8"/>
              <stop offset="70%" stop-color="#ff2a2a" stop-opacity="0.4"/>
              <stop offset="100%" stop-color="#ff2a2a" stop-opacity="0"/>
            </radialGradient>
          </defs>
          </defs>

          <g class="wall">
            <use href="#eagleTail" class="eagle-glow"></use>
            <use href="#eagleBody" class="eagle-glow"></use>
            <g id="eagleGroup" class="eagle-shape-group">
              <path id="eagleTail" class="eagle-shape" fill="url(#eagleBodyGradient)" d="M2290,1515.06l333.59,146.4-75.49-11.85,47.64,41.78-21.81,12.22-51.66-12.22,13.94,24.11h-25.83v15.99s-136.85-34.1-252.22-108.23l-43.58-19.98h55.54l-69.56-34.07h67.58l-3.88-25.94,25.73-28.21Z"/>
              <path id="eagleBody" class="eagle-shape" fill="url(#eagleBodyGradient)" d="M3096.2,496.89l309.74-164.4s-349.77,131.03-472.05,139.77c-6.07.58-11.56.73-16.46.58-103.3-4.06,287.38-53.75,414.46-246.14,127.12-192.54-30.26-11.01-30.26-11.01l-435.79,225.17,226.38-148.48,111.16-188.44-373.26,316.65-95.35,44.2,103.22-92.28,131.14-168.28,47.64-156.42-222.47,308.79s-126.97,132.17-186.68,144.13c0,0,174.83-192.36,182.84-336.63l-123.13,208.42s-135.09,172.42-166.89,192.39c-31.76,20.05-305.75,120.38-305.75,120.38l-484.49,280.58-194.55,88.15-190.69-3.99-329.57-132.31-162.81-69.01-21.64-15.73-97.44-39.45-52.23-32.89-56.24-32.89-22.62-26.34-174.68-100.33-57.48-34.61-41.88-33.59-214.29-200.37,59.48,176.4-59.48-27.99,29.71,124.19-29.71-28.03,91.3,136.12,162.68,120.38,254.21,60.04,357.45,140.44,170.67,19.98s-103.28,20.05-158.8,28.1c-55.62,8.01-87.38,32.05-87.38,32.05l-19.81,72.19h123.05l194.68,100.11,317.66,220.5,563.8,108.31h23.89l47.71,34.32h67.4l-95.24-70.48,75.41-24.04-39.7-44.09,59.53-40.03v-84.27l31.8-36.04,154.92-80.13h146.91l111.24-140.29,47.57-4.06,170.8-88.15v-46.98l79.44-73.33-119.17-16.02,119.17-12.08,59.53-78.74,123.13-45.45v-16.02l91.44-44.06-31.91-12.07,115.26-52.14-115.26-8.09,154.96-76.11-166.89-7.98,230.41-100.22-309.74,48.15ZM1082.48,1124.38c-23.38,0-50.86-23.46-50.86-23.46l86.61-12.55s-12.29,36-35.75,36Z"/>
            </g>
          </g>

          <g id="ambientLayer" aria-hidden="true"></g>

          <g id="stickersLayer" clip-path="url(#eagleClip)"></g>
          <g id="highlightsLayer" aria-hidden="true" style="pointer-events: none;"></g>
          <g id="effectsLayer" aria-hidden="true"></g>
          <g id="dragOverlay" aria-hidden="true"></g>
          </svg>
        </div>
      </div>
      <div class="zoom-controls" role="group" aria-label="縮放控制">
        <button type="button" id="onlineCountBtn" class="zoom-online" aria-label="在線人數與共鳴" style="display: none;">
          <svg class="online-heart-light" viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
          </svg>
          <span id="onlineCountNum">1</span>
        </button>
        <button type="button" id="playbackBtn" class="zoom-playback" aria-label="播放回顧">▶</button>
        <button type="button" id="searchBtn" class="zoom-search" aria-label="搜尋留言">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
        <label for="zoomSlider" class="sr-only">縮放百分比</label>
        <input
          type="range"
          id="zoomSlider"
          class="zoom-slider"
          min="100"
          max="1000"
          step="5"
          value="100"
          aria-label="縮放百分比"
        >
        <span id="zoomIndicator" class="zoom-indicator" aria-live="polite">100%</span>
        <button type="button" id="zoomResetBtn" class="zoom-reset" aria-label="重設縮放">⟳</button>
        <button type="button" id="settingsBtn" class="zoom-settings" aria-haspopup="dialog" aria-controls="settingsDialog" aria-label="開啟設定">⚙</button>
      </div>
      <div id="searchBar" class="search-bar" hidden>
        <div class="search-input-wrapper">
          <span class="search-icon">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
          </span>
          <input type="text" id="searchInput" placeholder="搜尋留言..." aria-label="搜尋留言">
        </div>
        <div class="search-actions">
          <span id="searchCount" class="search-count"></span>
          <div class="search-divider"></div>
          <button type="button" id="searchCloseBtn" class="search-close-btn" aria-label="關閉搜尋">✕</button>
        </div>
      </div>
      <div id="playbackDateContainer" class="playback-date-container" aria-hidden="true">
        <span id="playbackYearDisplay" class="playback-year"></span>
        <span id="playbackDateDisplay" class="playback-date"></span>
        <span id="playbackCounterDisplay" class="playback-counter"></span>
      </div>
      <div class="drag-palette" aria-label="貼紙工具">
        <div id="paletteSticker" class="palette-sticker" draggable="false" role="button" aria-pressed="false" tabindex="0" aria-label="貼紙樣本，點擊啟用或拖曳貼上">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <use href="#heartSticker"></use>
          </svg>
        </div>
      </div>
      <div id="statusToast" role="status" aria-live="polite"></div>
      <div id="loadingSpinner" class="loading-spinner" role="status" aria-label="載入中">
        <div class="spinner-ring"></div>
      </div>
    </section>
  </main>

  <dialog id="noteDialog" class="note-dialog" aria-labelledby="dialogTitle">
    <form method="dialog" id="noteForm">
      <header class="dialog-header">
        <h2 id="dialogTitle">神蹟留言</h2>
        <span class="dialog-subtitle" id="dialogSubtitle">（最多 800 字，留言於一日後鎖定）</span>
      </header>
      
      <!-- Search Navigation Arrows (Moved back inside dialog to be in Top Layer) -->
      <button type="button" id="dialogPrevBtn" class="dialog-nav-btn prev" hidden aria-label="上一則搜尋結果">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M15 18l-6-6 6-6"/></svg>
      </button>
      <button type="button" id="dialogNextBtn" class="dialog-nav-btn next" hidden aria-label="下一則搜尋結果">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M9 18l6-6-6-6"/></svg>
      </button>
      <div id="dialogSearchCounter" class="dialog-search-counter" hidden></div>

      <div class="flip-card">
        <div class="flip-card-inner" id="flipCardInner" data-state="front">
          <section class="flip-face front" id="flipFront" aria-hidden="false">
            <img src="svg/Top Church Mark.svg" alt="Top Church Mark" class="flip-sticker" draggable="false" loading="lazy" decoding="async">
          </section>
          <section class="flip-face back" id="flipBack" aria-hidden="true">
            <button type="button" id="expandBtn" class="expand-btn" aria-label="切換閱讀模式" title="放大/縮小">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
              </svg>
            </button>
            <div class="flip-body">
              <textarea id="noteInput" name="note" rows="6" maxlength="800" required placeholder="輸入留言" aria-label="留言內容"></textarea>
            </div>
          </section>
        </div>
      </div>
      <p id="formError" class="form-error" role="alert"></p>
      <p id="noteTimestamp" class="note-timestamp" hidden aria-live="polite"></p>
      <footer class="dialog-actions">
        <button type="button" id="cancelModalBtn" class="ghost">返回</button>
        <button type="button" id="deleteStickerBtn" class="danger" hidden>刪除</button>
        <button type="submit" class="primary">儲存</button>
      </footer>
    </form>
  </dialog>

  <dialog id="settingsDialog" class="settings-dialog" aria-labelledby="settingsTitle">
    <form method="dialog" id="settingsForm" class="settings-form">
      <header class="settings-header">
        <div>
          <p class="settings-kicker">偏好設定</p>
          <h2 id="settingsTitle">顯示與音訊</h2>
        </div>
        <button type="button" id="settingsCloseBtn" class="settings-close" aria-label="關閉設定">✕</button>
      </header>
      <section class="settings-section" aria-labelledby="audioSettingLabel">
        <div class="settings-row">
          <div>
            <p class="settings-label">您的署名</p>
            <p class="settings-description">修改留言時顯示的名稱。</p>
          </div>
          <div class="settings-input-wrapper">
            <input type="text" id="settingsNameInput" class="settings-input" placeholder="未設定" maxlength="20">
          </div>
        </div>
        <div class="settings-row">
          <div>
            <p id="audioSettingLabel" class="settings-label">背景音樂</p>
            <p class="settings-description">切換音樂播放。</p>
          </div>
          <label class="switch">
            <input type="checkbox" id="audioToggle" role="switch" aria-labelledby="audioSettingLabel">
            <span class="switch-track" aria-hidden="true">
              <span class="switch-thumb"></span>
            </span>
          </label>
        </div>
        <div class="settings-row" id="onlineSettingRow" style="margin-top: 1.5rem;">
          <div>
            <p id="onlineSettingLabel" class="settings-label">上線狀態</p>
            <p class="settings-description">顯示在線人數與互動愛心。</p>
          </div>
          <label class="switch">
            <input type="checkbox" id="onlineToggle" role="switch" aria-labelledby="onlineSettingLabel" checked>
            <span class="switch-track" aria-hidden="true">
              <span class="switch-thumb"></span>
            </span>
          </label>
        </div>
      </section>

      <section class="settings-section">
        <h3 class="settings-subtitle">功能說明</h3>
        <div class="settings-row info-row">
          <div class="settings-icon">▶</div>
          <div>
            <p class="settings-label">回顧動畫</p>
            <p class="settings-description">播放建立過程。</p>
          </div>
        </div>
        <div class="settings-row info-row">
          <div class="settings-icon">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
          </div>
          <div>
            <p class="settings-label">搜尋留言</p>
            <p class="settings-description">輸入關鍵字搜尋留言。</p>
          </div>
        </div>
        <div class="settings-row info-row" id="settingsInfoMarquee">
          <div class="settings-icon" style="font-size: 0.7rem;">💬</div>
          <div>
            <p class="settings-label">跑馬燈</p>
            <p class="settings-description">點擊跑馬燈文字可查看完整內容。</p>
          </div>
        </div>
        <div class="settings-row info-row" id="settingsInfoRealtime">
          <div class="settings-icon" style="font-size: 0.7rem;">❤️</div>
          <div>
            <p class="settings-label">即時互動</p>
            <p class="settings-description">顯示目前在線人數，點擊愛心可發送祝福。</p>
          </div>
        </div>
      </section>
      <footer class="settings-footer">
        <button type="submit" class="settings-primary" value="close">完成</button>
      </footer>
    </form>
  </dialog>

  <audio id="backgroundAudio"
         src="mp3/TopWorship - ignite.mp3"
         preload="auto"
         loop
         playsinline
         aria-hidden="true"
         tabindex="-1"
         hidden>
    您的瀏覽器不支援自動播放音訊。
  </audio>
  <dialog id="readModeOverlay" class="read-mode-overlay">
    <div class="read-mode-container">
      <header class="read-mode-header">
        <button type="button" id="closeReadModeBtn" class="close-btn" aria-label="縮小視窗" title="縮小視窗">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 14h6v6M20 10h-6V4M14 10l7-7M3 21l7-7"/>
          </svg>
        </button>
      </header>
      <div id="readModeContent" class="read-mode-content" hidden></div>
      <textarea id="readModeInput" placeholder="輸入留言"></textarea>
    </div>
  </dialog>

  <dialog id="welcomeDialog" class="welcome-dialog">
    <form method="dialog" id="welcomeForm" class="welcome-form">
      <header class="welcome-header">
        <h2>歡迎來到感恩牆</h2>
        <p>請輸入您的名稱。</p>
      </header>
      <div class="welcome-content">
        <label for="welcomeNameInput" class="sr-only">您的名稱</label>
        <input type="text" id="welcomeNameInput" placeholder="您的名稱" maxlength="20" required autocomplete="off">
      </div>
      <footer class="welcome-footer">
        <button type="submit" class="welcome-primary">開始</button>
      </footer>
    </form>
  </dialog>

  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha384-fXdIufVbE9aU7STmdk/DWK0imNOozId9fTwzM/gi0NfPjphEIC3gq0M760UnsKVy" crossorigin="anonymous"></script>
  <canvas id="ghostCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; touch-action: none;"></canvas>
  <script type="module" src="js/app.js"></script>
</body>
</html>
